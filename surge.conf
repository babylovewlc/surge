[General]
# > 通用
# > Internet 测试 URL
internet-test-url = http://www.baidu.com/generate_204
# > 代理测速 URL
proxy-test-url = http://www.gstatic.com/generate_204
# > 测试超时（秒）
test-timeout = 5
# > WiFi 助手
# wifi-assist = true
# > 开启后，等同于对所有策略设置 hybrid = true，所有 TCP 连接在建立时均会并发尝试数据网络和 WiFi 连接。
# > 除此之外，所有 DNS 查询操作也都将并发在数据网络和 WiFi 上进行。所以若想体验该功能，请手动配置公网 DNS，暂不支持 DOH。
all-hybrid = false
# > GeoIP 数据库
geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
# > 自定义 GeoIP 数据库
disable-geoip-db-auto-update = false
# > GeoIP 禁用自动更新
# 如果没有代理服务器支持 UDP 转发，可修改为「 direct 」或注释下条，但需注意同一目标主机名 TCP 请求与 UDP 请求的源地址不同所造成的隐私及安全风险。
udp-policy-not-supported-behaviour = REJECT
# > 隐藏状态栏上的 VPN 图标
hide-vpn-icon = false
# > 是否启动完整的 IPv6 支持 (默认值: false)
ipv6 = false
# > Surge VIF IPv6 Stack
# > 允许 IPv6 通过 Surge VIF。当希望 Surge 处理连接到 IPv6 地址的原始 TCP 连接时非常有用。可选项：true，false，auto，always
ipv6-vif = disabled
# > 允许 Wi-Fi 访问 (仅 iOS，若允许远程访问将「false」改为「true」)
# > Wi-Fi 访问
# > Surge 作为 HTTP/SOCKS5 代理服务器向 Wi-Fi 网络下的其他设备提供服务器
allow-wifi-access = false
# > HTTP 服务端口 (默认值: 6152)
# > 远程控制器
# > 允许外部控制器访问 Surge，Surge Dashboard 或 Surge CLI 进行管理控制
# http-api-tls = false
http-api-web-dashboard = true
# > 远程控制器
# skip-proxy = *.local,10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.168.0.0/16, 224.0.0.0/3, ::1/128, fc00::/7, fd00::/8, fe80::/10, ff00::/8, 2001::/32, 2001:db8::/32, 2002::/16, ::ffff:0:0:0:0/1, ::ffff:128:0:0:0/1, localhost, *.local, e.crashlytics.com, captive.apple.com, sequoia.apple.com, seed-sequoia.siri.apple.com, app.yinxiang.com, injections.adguard.org, local.adguard.org, cable.auth.com, *.id.ui.direct, www.baidu.com, passenger.t3go.cn, wxh.wo.cn, gate.lagou.com, www.abchina.com.cn, yunbusiness.ccb.com, login-service.mobile-bank.psbc.com, mobile-bank.psbc.com
# > Safari 输入 127.0.0.1:6171,填入 HTTP-API 密码即可。
use-default-policy-if-wifi-not-primary = false
# > 跳过代理
skip-proxy = 192.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local
# > 当遇到 REJECT 策略时返回错误页
show-error-page-for-reject = true
# > 日志级别
loglevel = notify
# > 强制使用特定的 DNS 服务器
# include-all-networks = false
# include-local-networks = false
# > 排除简单主机名
exclude-simple-hostnames = true
# > 从 /etc/hosts 读取 DNS 记录
read-etc-hosts = true
# > Always Real IP Hosts
always-real-ip = *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.battlenet.com.cn, *.battlenet.com, *.blzstatic.cn, *.battle.net
# UDP 优先级
# udp-priority = false
# > DNS 服务器
dns-server = 223.5.5.5, 114.114.114.114, 119.29.29.29, 162.159.195.1, system
# DoH 服务器
encrypted-dns-server = https://223.5.5.5/dns-query
# > DNS 劫持
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
# 允许个人热点访问
allow-hotspot-access = true
# HTTP 服务端口
wifi-access-http-port = 9510
# SOCKS5 服务端口
wifi-access-socks5-port = 9511
http-listen = 0.0.0.0:9510
socks5-listen = 0.0.0.0:9511

[Proxy]
全球直连 = direct

[Proxy Group]
# 订阅链接替换:[https://sub.store/download/collection/all?target=Surge]
# 自动节点
# 自动选择 = url-test, policy-path=https://sub.store/download/hello?target=Surge, update-interval=86400, interval=600, tolerance=200, no-alert=0, hidden=0, include-all-proxies=0
# 节点选择
手动切换 = select, 全球直连, 漏网之鱼, policy-path=https://trodyq.testhello.us.kg/951wlc, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
# 手动切换 = select, Proxy-hy, policy-path=https://djjc.cfd/api/v1/client/subscribe?token=1e1ec007a4cc11f512b20d1cf82de4cf, update-interval=1800, udp-relay=true, url=http://www.gstatic.com/generate_204, no-alert=0, hidden=0, include-all-proxies=0
# 节点选择 = select, 全球直连, 香港节点, 台湾节点, 日本节点, 韩国节点, 泰国节点, 美国节点, 英国节点, 印度节点, 法国节点, 德国节点, 荷兰节点, 南非节点, 新加坡节点, 菲律宾节点, 加拿大节点, 俄罗斯节点, 阿根廷节点, 爱尔兰节点, 土耳其节点
# 应用节点
# 油管视频 = select, 手动切换, 香港节点, 台湾节点, 日本节点, 韩国节点, 泰国节点, 美国节点, 英国节点, 印度节点, 法国节点, 德国节点, 荷兰节点, 南非节点, 新加坡节点, 菲律宾节点, 加拿大节点, 俄罗斯节点, 阿根廷节点, 爱尔兰节点, 土耳其节点, no-alert=0, hidden=0, include-all-proxies=0
# 奈飞视频 = select, 奈飞节点, 手动切换, 台湾节点, 日本节点, 韩国节点, 泰国节点, 美国节点, 英国节点, 印度节点, 法国节点, 德国节点, 荷兰节点, 南非节点, 新加坡节点, 菲律宾节点, 加拿大节点, 俄罗斯节点, 阿根廷节点, 爱尔兰节点, 土耳其节点, url=http://www.gstatic.com/generate_204, persistent=1, no-alert=0, hidden=0, include-all-proxies=0
# 哔哩哔哩 = select, 全球直连, 手动切换, 香港节点, 台湾节点, 日本节点, 韩国节点, 泰国节点, 美国节点, 英国节点, 印度节点, 法国节点, 德国节点, 荷兰节点, 南非节点, 新加坡节点, 菲律宾节点, 加拿大节点, 俄罗斯节点, 阿根廷节点, 爱尔兰节点, 土耳其节点, url=http://www.gstatic.com/generate_204
# 网易音乐 = select, 全球直连, url=http://www.gstatic.com/generate_204
# Spotify = select, 手动切换, 香港节点, 台湾节点, 日本节点, 韩国节点, 泰国节点, 美国节点, 英国节点, 印度节点, 法国节点, 德国节点, 荷兰节点, 南非节点, 新加坡节点, 菲律宾节点, 加拿大节点, 俄罗斯节点, 阿根廷节点, 爱尔兰节点, 土耳其节点, url=http://www.gstatic.com/generate_204
# 国外媒体 = url-test, 手动切换, 香港节点, 台湾节点, 日本节点, 韩国节点, 泰国节点, 美国节点, 英国节点, 印度节点, 法国节点, 德国节点, 荷兰节点, 南非节点, 新加坡节点, 菲律宾节点, 加拿大节点, 俄罗斯节点, 阿根廷节点, 爱尔兰节点, 土耳其节点, url=http://www.gstatic.com/generate_204, interval=600
# 国内媒体 = select, 全球直连, url=http://www.gstatic.com/generate_204
# 微软云盘 = select, 全球直连, 香港节点, url=http://www.gstatic.com/generate_204
# 微软服务 = select, 全球直连, url=http://www.gstatic.com/generate_204
# 苹果服务 = select, 全球直连, 香港节点, url=http://www.gstatic.com/generate_204
# 游戏平台 = select, 手动切换, 香港节点, 台湾节点, 日本节点, 韩国节点, 泰国节点, 美国节点, 英国节点, 印度节点, 法国节点, 德国节点, 荷兰节点, 南非节点, 新加坡节点, 菲律宾节点, 加拿大节点, 俄罗斯节点, 阿根廷节点, 爱尔兰节点, 土耳其节点, url=http://www.gstatic.com/generate_204, interval=600, no-alert=0, hidden=0, include-all-proxies=0
# 游戏节点,
# TikTok = select, 手动切换, 香港节点, 台湾节点, 日本节点, 韩国节点, 泰国节点, 美国节点, 英国节点, 印度节点, 法国节点, 德国节点, 荷兰节点, 南非节点, 新加坡节点, 菲律宾节点, 加拿大节点, 俄罗斯节点, 阿根廷节点, 爱尔兰节点, 土耳其节点, url=http://www.gstatic.com/generate_204, interval=600, no-alert=1, hidden=0, include-all-proxies=0
# Github = select, 手动切换, 香港节点, 台湾节点, 日本节点, 韩国节点, 泰国节点, 美国节点, 英国节点, 印度节点, 法国节点, 德国节点, 荷兰节点, 南非节点, 新加坡节点, 菲律宾节点, 加拿大节点, 俄罗斯节点, 阿根廷节点, 爱尔兰节点, 土耳其节点, hidden=0, interval=600, no-alert=1
# 漏网之鱼
漏网之鱼 = select, 泰国节点, 印度节点, 法国节点, 德国节点, 荷兰节点, 南非节点, 菲律宾节点, 加拿大节点, 阿根廷节点, 土耳其节点, policy-regex-filter=罗马尼亚|泰|印|非|澳|土|菲|爱
# > 外部节点自动匹配
# > 匹配到关键字，自动收纳为节点组
# 游戏节点
# 游戏节点 = select, policy-regex-filter=(游戏)|GAME|Game, url=http://www.gstatic.com/generate_204, interval=600, tolerance=200, include-other-group=自动选择, hidden=1, no-alert=1, img-url=gamecontroller
# 香港节点
香港节点 = url-test, policy-regex-filter=(🇭🇰)|港|虚通|HK|Hong, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 台湾节点
台湾节点 = url-test, policy-regex-filter=(🇹🇼)|台|TW|Tai, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 日本节点
日本节点 = url-test, policy-regex-filter=(🇯🇵)|日|川日|东京|大阪|泉日|埼玉|JP|Japan, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 韩国节点
韩国节点 = url-test, policy-regex-filter=(🇰🇷)|韩|韓|首尔|KR|Korea, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 泰国节点
泰国节点 = url-test, policy-regex-filter=(🇹🇭)|泰|曼谷|TH|Thailand, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 美国节点
美国节点 = url-test, policy-regex-filter=(🇺🇸)|美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|US|United States, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 英国节点
英国节点 = url-test, policy-regex-filter=(🇬🇧)|英|伦敦|UK|United Kingdom, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 印度节点
印度节点 = url-test, policy-regex-filter=(🇮🇳)|印|班加罗尔|孟买|Mumbai|IN|India, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 法国节点
法国节点 = url-test, policy-regex-filter=(🇫🇷)|法|FR|France, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 德国节点
德国节点 = url-test, policy-regex-filter=(🇩🇪)|德|DE|Germany, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 荷兰节点
荷兰节点 = url-test, policy-regex-filter=(🇳🇱)|荷|NL|Holland|Netherlands, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 南非节点
南非节点 = url-test, policy-regex-filter=(🇿🇦)|南非|ZA|South Africa, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 新加坡节点
新加坡节点 = url-test, policy-regex-filter=(🇸🇬)|新|SG|Singapore, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 菲律宾节点
菲律宾节点 = url-test, policy-regex-filter=(🇵🇭)|菲|PH|Philippines, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 加拿大节点
加拿大节点 = url-test, policy-regex-filter=(🇨🇦)|加|CA|Canada, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 俄罗斯节点
俄罗斯节点 = url-test, policy-regex-filter=(🇷🇺)|俄|RU|Russia, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 阿根廷节点
阿根廷节点 = url-test, policy-regex-filter=(🇦🇷)|阿|AR|Argentina, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 爱尔兰节点
# 爱尔兰节点 = url-test, policy-regex-filter=(🇮🇪)|爱|IE|Ireland, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0
# 土耳其节点
土耳其节点 = url-test, policy-regex-filter=(🇹🇷)|土|TR|Turkey, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0

[Rule]

RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMax/ChinaMax_All.list,DIRECT,extended-matching
# > 局域网地址
RULE-SET,LAN,DIRECT

FINAL,手动切换,dns-failed

[URL Rewrite]
^https?:\/\/(www\.)?g\.cn https://www.google.com 302
^https?:\/\/(www\.)?google\.cn https://www.google.com 302

[MITM]
skip-server-cert-verify = true
h2 = true
